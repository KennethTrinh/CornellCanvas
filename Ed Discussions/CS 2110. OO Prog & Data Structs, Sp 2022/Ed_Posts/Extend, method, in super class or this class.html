<h1>
 Title: Extend, method, in super class or this class
</h1>
<h3>
 Author: Anonymous
</h3>
<h3>
 Date: 2022-03-05T11:25:05.398618+11:00
</h3>
<h3>
 Category: General
</h3>
<h3>
 Vote Count: 0
</h3>
<p>
 " Assume class B extends A and A x= new B();. Then x.m() is valid if and only if m is declared in class A or one of its superclasses."
</p>
<p>
 Why can't the method be in B?
</p>
<h3>
 ----------- REPLIES -----------
</h3>
<div style="text-indent: 2em;">
 <h3>
  Author: David Gries (admin)
 </h3>
 <h3>
  Vote Count: 0
 </h3>
 <p>
  Have you heard of the compile-time reference rule? Look it up.
 </p>
 <h3>
  ------------------------------------
 </h3>
 <div style="text-indent: 4em;">
  <h3>
   Author: Anonymous
  </h3>
  <h3>
   Vote Count: 0
  </h3>
  <p>
   I don't understand. The compile-time reference rule says "The variable reference p.v (or method call p.m(...)) is syntactically correct and can be compiled only if v (or method m) is declared in P or is inherited by P." But the question here is, when the initiation says "A x = new B()", is this x a A or a B? If it's a B, then it should be able to use all the methods in B and in its superclasses (instead of A and A's superclasses), right?
  </p>
  <h3>
   ------------------------------------
  </h3>
  <div style="text-indent: 6em;">
   <h3>
    Author: Andrew Chen (staff)
   </h3>
   <h3>
    Vote Count: 0
   </h3>
   <p>
    When we declare a variable of type A, and initialize an instance of its subclass B, we are actually limited to accessing only the fields and methods in A. The Object is of type B, but the reference type is A. We would have to downcast x to B in order to access m().
   </p>
   <h3>
    ------------------------------------
   </h3>
   <div style="text-indent: 8em;">
    <h3>
     Author: Anonymous
    </h3>
    <h3>
     Vote Count: 0
    </h3>
    <p>
     But here in this exam question, it says "Animal emma= new Cow("xxx")", and class Cow extends Animal, and they both have the method makeSound. So when we call emma.makeSound(), it should use the method in Animal rather than in Cow right? Why is it not the answer here?
    </p>
    <figure>
     <image height="639.5034246575342" src="https://static.us.edusercontent.com/files/IyyQwHhal0iOL0PHIuUkRdKv" width="590"/>
    </figure>
    <h3>
     ------------------------------------
    </h3>
    <div style="text-indent: 10em;">
     <h3>
      Author: Andrew Chen (staff)
     </h3>
     <h3>
      Vote Count: 0
     </h3>
     <p>
      When a method is accessible in the parent class, Animal here, and we call the method, we look at the dynamic type. So since the dynamic type of emma is Cow, we call Cowâ€™s method makeSound()
     </p>
     <h3>
      ------------------------------------
     </h3>
     <div style="text-indent: 12em;">
      <h3>
       Author: Anonymous
      </h3>
      <h3>
       Vote Count: 0
      </h3>
      <p>
       So if class animal doesn't have the method makeSound, even if class cow has it, "emma.makeSound()" wouldn't be valid?
      </p>
      <p>
       Will "(cow)emma.makeSound()" make it valid?
      </p>
      <h3>
       ------------------------------------
      </h3>
      <div style="text-indent: 14em;">
       <h3>
        Author: Andrew Chen (staff)
       </h3>
       <h3>
        Vote Count: 0
       </h3>
       <p>
        That is correct. We would HAVE to downcast to Cow if the method was not in Animal, because then it wouldn't be accessible in class Animal. Without downcasting, this code then wouldn't compile.
       </p>
       <h3>
        ------------------------------------
       </h3>
       <div style="text-indent: 16em;">
        <h3>
         Author: Anonymous
        </h3>
        <h3>
         Vote Count: 0
        </h3>
        <p>
         Oh I get it. So the declared type is like the superficial thing that decides if you can use this method (decides if it compiles). The pointer points to the real stuff that gets used after it compiles. So changing (casting) it only change the superficial thing and determines whether it's allowed, while the real stuff is what is really used.
        </p>
        <h3>
         ------------------------------------
        </h3>
        <div style="text-indent: 18em;">
         <h3>
          Author: Andrew Chen (staff)
         </h3>
         <h3>
          Vote Count: 0
         </h3>
         <p>
          That sounds right! Nice analogies :)
         </p>
         <h3>
          ------------------------------------
         </h3>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>
</div>